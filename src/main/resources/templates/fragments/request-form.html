<div class="request-layout-container" th:fragment="content">
    <style>
        /* === CÁC STYLE CŨ CỦA BẠN (GIỮ NGUYÊN) === */
        .form-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #212529;
        }
        .form-group {
            margin-bottom: 1.25rem;
        }
        .form-label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 0.5rem;
        }
        .form-control:focus,
        .form-select:focus {
            border-color: #e65100;
            box-shadow: 0 0 0 0.2rem rgba(230, 81, 0, 0.25);
        }
        .btn-submit {
            background-color: #e65100;
            border-color: #e65100;
            color: white;
            font-weight: 500;
            width: 100%;
            padding: 0.75rem;
            border-radius: 6px;
            transition: background-color 0.2s;
        }
        .btn-submit:hover {
            background-color: #cc4400;
            border-color: #cc4400;
            color: white;
        }
        .readonly-field {
            background-color: #f8f9fa;
            color: #495057;
        }

        /* === CÁC STYLE MỚI CHO BỐ CỤC 2 CỘT === */

        /* 1. Container cha chia 2 cột */
        .request-layout-container {
            display: grid;
            /* Tỉ lệ cột: 1fr cho form, 1fr cho danh sách. Bạn có thể đổi thành 4fr 5fr nếu muốn */
            grid-template-columns: 1fr 1fr;
            gap: 2rem; /* Khoảng cách giữa 2 cột */
            max-width: 1400px; /* Tăng chiều rộng tối đa */
            margin: 0 auto;
            padding: 1rem; /* Thêm padding cho toàn trang */
        }

        /* 2. Style chung cho cả 2 cột (thẻ card trắng) */
        .request-form-column,
        .request-list-column {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e0e0;
        }

        /* 3. Style riêng cho cột danh sách (bên phải) */
        .request-list-column {
            max-height: 85vh; /* Giới hạn chiều cao */
            overflow-y: auto; /* Tự động thêm thanh cuộn khi dài */
            display: flex;
            flex-direction: column;
        }

        /* Cần thiết để bảng co dãn */
        .sent-requests-container {
            flex-grow: 1;
            overflow: hidden;
        }

        /* Bỏ class .form-container cũ vì đã thay bằng layout mới */
        /*
        .form-container {
            max-width: 500px;
        }
        */
    </style>

    <div class="request-form-column">
        <h1 class="form-title">Create Request</h1>

        <form id="requestForm" enctype="multipart/form-data">
            <div class="form-group">
                <label for="eventName" class="form-label">Event Name</label>
                <input
                        type="text"
                        class="form-control readonly-field"
                        id="eventName"
                        th:value="${formData.eventName}"
                        readonly>
                <input type="hidden" id="eventId" th:value="${formData.eventId}">
            </div>

            <div class="form-group">
                <label for="department" class="form-label">Department</label>
                <select class="form-select" id="department" name="receiverId" >
                    <option value="">Select a department...</option>
                    <option th:each="dept : ${formData.departments}"
                            th:value="${dept.id}"
                            th:text="${dept.name}"></option>
                </select>
            </div>

            <div class="form-group">
                <label for="message" class="form-label">Message</label>
                <textarea
                        class="form-control"
                        id="message"
                        name="message"
                        rows="4"
                        placeholder="Enter your message here..."></textarea>
            </div>

            <div class="form-group">
                <label for="file" class="form-label">Attachment</label>
                <input
                        type="file"
                        class="form-control"
                        id="file"
                        name="file">
                <small class="text-muted">Optional: Upload a file to attach to your request</small>
            </div>

            <button type="submit" class="btn btn-submit">Submit Request</button>
        </form>
    </div>

    <div class="request-list-column">
        <h2 class="form-title">Sent Requests</h2>

        <div class="sent-requests-container">
            <div th:if="${sentRequests == null || sentRequests.isEmpty()}">
                <p class="text-muted">You have not sent any requests yet.</p>
            </div>

            <table class="table table-hover" th:unless="${sentRequests == null || sentRequests.isEmpty()}">
                <thead>
                <tr>
                    <th scope="col">Event</th>
                    <th scope="col">To Department</th>
                    <th scope="col">Status</th>
                    <th scope="col">Sent At</th>
                    <th scope="col">View</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="req : ${sentRequests}" style="vertical-align: middle;">

                    <td th:text="${req.eventTitle}">Sự kiện Test</td>

                    <td th:text="${req.receiverName}">Ban Tổ Chức</td>

                    <td>
                        <span th:text="${req.status}"
                              th:classappend="${
                                  req.status.name() == 'PENDING' ? 'badge bg-warning text-dark' :
                                 (req.status.name() == 'APPROVED' ? 'badge bg-success' :
                                 (req.status.name() == 'REJECTED' ? 'badge bg-danger' : 'badge bg-secondary'))
                               }"
                              class="badge">
                            PENDING
                        </span>
                    </td>

                    <td th:text="${#temporals.format(req.createdAt, 'dd-MM-yyyy HH:mm')}">
                        01-11-2025
                    </td>

                    <td>
                        <a th:href="@{/requests/view/{id}(id=${req.requestId})}"
                           class="btn btn-sm btn-outline-primary">
                            View
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</div>