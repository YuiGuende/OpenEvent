<!-- templates/layout.html -->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head(${pageTitle})}"></head>
<body th:data-user-id="${#authentication.principal?.id ?: 2}">
    <header th:replace="~{fragments/header :: siteHeader('home')}"></header>

    <main class="page-main" th:fragment="content">
        <!-- Nội dung trang sẽ được chèn ở đây -->
    </main>

    <footer th:replace="~{fragments/footer :: siteFooter()}"></footer>

    <!-- WebSocket Libraries for Realtime Notifications -->
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    
    <!-- Scripts -->
    <script th:src="@{/js/main.js}"></script>
    
    <!-- Chatbot Integration -->
    <div id="openevent-chatbot-container"></div>
    <script th:src="@{/js/chatbot.js}"></script>
    
    <!-- Chatbot Fragment - Only for authenticated users -->
    <div th:if="${#authorization.expression('isAuthenticated()')}"
         th:replace="~{fragments/chatbot :: chatbot(${#authentication.principal?.id})}">
    </div>
</body>
</html>
