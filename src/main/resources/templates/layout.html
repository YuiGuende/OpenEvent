<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head(${pageTitle})}"></head>

<body class="page-bg">

<!-- FRAGMENT LAYOUT: nhận content, activeMenu, uid -->
<th:block th:fragment="layout(content, activeMenu, uid)">
    <header th:replace="~{fragments/header :: siteHeader(${activeMenu})}"></header>

    <main class="page-main">
        <th:block th:replace="${content}"></th:block>
    </main>

    <footer th:replace="~{fragments/footer :: siteFooter()}"></footer>

    <!-- Chatbot: chỉ render khi có uid -->
    <div id="openevent-chatbot-container"></div>
    <th:block th:if="${uid != null}">
        <div th:replace="~{fragments/chatbot :: chatbot(${uid})}"></div>
    </th:block>

    <!-- Scripts -->
    <script th:if="${uid != null}" th:src="@{/js/chatbot.js(v=3)}" defer></script>
    <script th:src="@{/js/main.js}" defer></script>
</th:block>
</body>
</html>
